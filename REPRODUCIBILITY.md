# Reproducibility Guide

## Project: Loneliness × Gender × Executive Function Study

**Purpose**: This document provides step-by-step instructions for reproducing all analyses in this research project.

**Last Updated**: 2025-11-16

---

## 1. System Requirements

### Operating System
- **Developed on**: Windows 10/11
- **Compatible with**: Windows, macOS, Linux (with minor path adjustments)

### Software Dependencies
- **Python**: 3.11+ (tested on 3.11.x)
- **Git**: For version control (optional but recommended)
- **Text Editor**: For viewing outputs (any UTF-8 compatible editor)

### Hardware
- **Minimum RAM**: 8 GB
- **Recommended RAM**: 16 GB
- **Disk Space**: 2 GB for environment + data + outputs

---

## 2. Environment Setup

### Step 1: Clone or Download Repository
```bash
git clone <repository_url>
cd my_research_exporter
```

### Step 2: Create Python Virtual Environment
```bash
# Windows
python -m venv venv
.\venv\Scripts\activate

# macOS/Linux
python3 -m venv venv
source venv/bin/activate
```

### Step 3: Install Dependencies
```bash
# Install exact package versions used in original analysis
pip install -r requirements_frozen.txt

# Alternative: Install minimum required packages
pip install pandas numpy scipy statsmodels scikit-learn matplotlib seaborn pymc arviz
```

### Step 4: Verify Installation
```bash
python -c "import pandas as pd; import numpy as np; import statsmodels.api as sm; print('Environment ready!')"
```

---

## 3. Data Structure

### Required Data Files (in `results/`)
1. `1_participants_info.csv` - Demographics (age, gender, education)
2. `2_surveys_results.csv` - UCLA Loneliness & DASS-21 scores
3. `3_cognitive_tests_summary.csv` - Aggregate task performance
4. `4a_prp_trials.csv` - PRP trial-level data
5. `4b_wcst_trials.csv` - WCST trial-level data
6. `4c_stroop_trials.csv` - Stroop trial-level data

**NOTE**: Raw data files are NOT included in public repository due to privacy.
Contact authors for de-identified dataset or use synthetic data for testing.

### Derived Data Files (generated by analyses)
- `results/analysis_outputs/master_dataset.csv` - Merged dataset
- `results/analysis_outputs/master_expanded_metrics.csv` - Extended metrics
- Various output CSVs in subdirectories

---

## 4. Running Analyses

### Core Analysis Pipeline (Original Work)

```bash
# Activate virtual environment first!
.\venv\Scripts\activate  # Windows
source venv/bin/activate  # macOS/Linux

# 1. Main hypothesis testing
PYTHONIOENCODING=utf-8 python analysis/run_analysis.py

# 2. Gender moderation confirmatory
PYTHONIOENCODING=utf-8 python analysis/gender_moderation_confirmatory.py

# 3. Ex-Gaussian decomposition
PYTHONIOENCODING=utf-8 python analysis/exgaussian_rt_analysis.py

# 4. DASS stratification
PYTHONIOENCODING=utf-8 python analysis/dass_3way_stratification.py
```

### New Analyses (This Report)

```bash
# 1. Split-half replication
PYTHONIOENCODING=utf-8 python analysis/split_half_internal_replication.py

# 2. Female compensation costs
PYTHONIOENCODING=utf-8 python analysis/female_compensation_cost_analysis.py

# 3. UCLA facet analysis
PYTHONIOENCODING=utf-8 python analysis/ucla_facets_ef_prediction.py

# 4. DASS anxiety mask hypothesis
PYTHONIOENCODING=utf-8 python analysis/dass_anxiety_mask_hypothesis.py

# 5. Publication figures
PYTHONIOENCODING=utf-8 python analysis/generate_publication_figures.py
```

### Run All Analyses (Batch)
```bash
# Windows
for %f in (analysis\*.py) do PYTHONIOENCODING=utf-8 python "%f"

# macOS/Linux
for script in analysis/*.py; do PYTHONIOENCODING=utf-8 python "$script"; done
```

---

## 5. Expected Outputs

### Directory Structure
```
results/
├── analysis_outputs/
│   ├── robustness/
│   │   └── split_half_replication/
│   │       ├── split_half_100_iterations.csv
│   │       ├── split_half_main_result.csv
│   │       └── SPLIT_HALF_REPLICATION_REPORT.txt
│   ├── female_compensation_costs/
│   │   ├── compensation_costs_results.csv
│   │   ├── compensation_costs_summary.png
│   │   └── FEMALE_COMPENSATION_COSTS_REPORT.txt
│   ├── ucla_facets_ef/
│   │   ├── facet_correlations.csv
│   │   ├── facet_interactions.csv
│   │   └── UCLA_FACETS_EF_REPORT.txt
│   ├── dass_anxiety_mask/
│   │   ├── anxiety_stratified_results.csv
│   │   ├── anxiety_stratified_scatterplots.png
│   │   └── ANXIETY_MASK_HYPOTHESIS_REPORT.txt
│   └── publication_figures/
│       ├── Figure1_MainEffect.pdf
│       ├── Figure2_KeyFindings.pdf
│       ├── Figure3_ForestPlot.pdf
│       └── FIGURE_CATALOG.txt
```

### Key Files
- **Reports**: All `*_REPORT.txt` files contain detailed results
- **Data**: All `.csv` files contain numerical results
- **Figures**: `.pdf` (vector) and `.png` (raster) formats

---

## 6. Verification & Testing

### Check Data Integrity
```bash
# Count rows in key files
python -c "import pandas as pd; print(f\"Participants: {len(pd.read_csv('results/1_participants_info.csv'))}\")"
python -c "import pandas as pd; print(f\"UCLA scores: {len(pd.read_csv('results/2_surveys_results.csv')[pd.read_csv('results/2_surveys_results.csv')['surveyName']=='ucla'])}\")"
```

### Verify Analysis Outputs
```bash
# Check if main outputs exist
ls results/analysis_outputs/robustness/split_half_replication/
ls results/analysis_outputs/publication_figures/
```

### Compare Results
Original findings (from reports):
- Main effect: UCLA × Gender → PE, p ≈ 0.004-0.031 (varies by sample)
- PRP RT (males): r ≈ 0.557, p < 0.001
- Split-half direction consistency: 95%

Run analyses and compare to expected values within ±10% (due to random seeds).

---

## 7. Troubleshooting

### Issue: Unicode Errors
**Solution**: Ensure `PYTHONIOENCODING=utf-8` is set before running scripts
```bash
# Windows PowerShell
$env:PYTHONIOENCODING="utf-8"
python analysis/script.py

# Windows CMD
set PYTHONIOENCODING=utf-8
python analysis/script.py
```

### Issue: Missing Columns
**Symptom**: KeyError for 'participant_id', 'gender', 'pe_rate'
**Solution**:
- Check data files have correct column names
- Some CSVs use `participantId` (old) vs `participant_id` (new)
- Scripts handle this automatically, but verify data integrity

### Issue: Package Import Errors
**Solution**:
```bash
pip install --upgrade pip
pip install -r requirements_frozen.txt --force-reinstall
```

### Issue: Insufficient Memory
**Solution**:
- Close other applications
- Reduce number of bootstrap iterations (edit script: `n_boot=1000` instead of `n_boot=10000`)
- Run analyses sequentially instead of in batch

---

## 8. Citation & Attribution

If you use this code or data, please cite:

```
[Authors]. (2025). Gender-specific pathways linking loneliness to executive
function impairment: Evidence for attentional lapses in males and adaptive
compensation in females. [Journal Name], [Volume](Issue), [Pages].
```

Code repository: [GitHub URL]
DOI: [Publication DOI]

---

## 9. Contact Information

**Principal Investigator**: [Name]
**Email**: [email@institution.edu]
**Institution**: [University/Institute]

For questions about:
- **Data access**: Contact PI
- **Code issues**: Open GitHub issue or email
- **Replication**: Email with "Replication Query" in subject

---

## 10. Changelog

### Version 1.0 (2025-11-16)
- Initial release with 152+ analysis scripts
- Added new analyses: split-half replication, compensation costs, facets, anxiety mask
- Generated publication figures
- Comprehensive documentation

### Planned Updates
- Docker container for full reproducibility
- Synthetic dataset for public testing
- Interactive Jupyter notebooks for key analyses
- Pre-registration documents (for prospective replication)

---

## 11. License

**Code**: MIT License (see LICENSE file)
**Data**: Available upon request with IRB approval
**Figures**: CC BY 4.0 (attribution required)

---

## 12. Acknowledgments

This reproducibility guide follows best practices from:
- TIER Protocol 4.0
- APA 7th Edition Guidelines
- Open Science Framework (OSF)
- rOpenSci standards

Software dependencies managed via pip/venv.
All analyses conducted in Python 3.11+ environment.

---

**END OF REPRODUCIBILITY GUIDE**

For additional resources, see:
- `CLAUDE.md` - Project-specific guidance for AI assistants
- `NEW_ANALYSES_COMPREHENSIVE_REPORT.txt` - Detailed findings summary
- Individual analysis scripts - Heavily commented for transparency
